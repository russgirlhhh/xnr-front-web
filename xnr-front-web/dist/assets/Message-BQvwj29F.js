import{_ as L,u as w,a as $,b as m,z as x,y as P,c as k,o,m as n,p as s,q as h,t as l,s as d,J as S,K as V,e as i,l as b,w as g,f as c,v as H,x as U}from"./index-CEFTijA-.js";import{d as B}from"./api-whLdgNP3.js";const I=_=>(H("data-v-19791d7b"),_=_(),U(),_),D={class:"menu"},q=I(()=>s("span",null,"回复我的",-1)),z={key:0,class:"count-tag"},A=I(()=>s("span",null,"点赞我的",-1)),R={key:0,class:"count-tag"},E=I(()=>s("span",null,"系统消息",-1)),F={key:0,class:"count-tag"},J={class:"message-panel"},K={class:"message-list"},j={key:0,class:"message-item"},G={class:"message-content"},O=["innerHTML"],Q={class:"create-time"},W={key:1,class:"message-item"},X={class:"message-content"},Y={class:"create-time"},Z=["innerHTML"],ee={key:2,class:"message-item"},se={class:"message-content"},te={class:"create-time"},ae={key:0},oe={__name:"Message",setup(_){w(),$();const f=b(),t=m({});x(()=>f.state.messageCountInfo,(u,a)=>{t.value=u||{}},{immediate:!0,deep:!0});const r=m("reply"),M=m(!1),y=u=>{r.value=u,T()};P(()=>{T()});const v=m({}),T=async()=>{let u={code:r.value},a=await B(u);a&&(v.value=a.data,f.commit("readMessage",r.value))};return(u,a)=>{const C=k("Avatar"),p=k("router-link"),N=k("NoData");return o(),n("div",null,[s("div",D,[s("div",{class:h(["mItem",r.value=="reply"?"active":""]),onClick:a[0]||(a[0]=e=>y("reply"))},[q,t.value.reply>0?(o(),n("span",z,l(t.value.reply>99?"99+":t.value.reply),1)):d("",!0)],2),s("div",{class:h(["mItem",r.value=="likePost"?"active":""]),onClick:a[1]||(a[1]=e=>y("likePost"))},[A,t.value.likePost>0?(o(),n("span",R,l(t.value.likePost>99?"99+":t.value.likePost),1)):d("",!0)],2),s("div",{class:h(["mItem",r.value=="sys"?"active":""]),onClick:a[2]||(a[2]=e=>y("sys"))},[E,t.value.sys>0?(o(),n("span",F,l(t.value.sys>99?"99+":t.value.sys),1)):d("",!0)],2)]),s("div",J,[(o(!0),n(S,null,V(v.value.list,e=>(o(),n("div",K,[e.messageType==0?(o(),n("div",j,[s("div",G,[s("span",{innerHTML:e.messageContent},null,8,O),s("span",Q,l(e.createTime),1)])])):d("",!0),e.messageType==1?(o(),n("div",W,[i(C,{userId:e.sendUserId,width:50},null,8,["userId"]),s("div",X,[s("div",null,[i(p,{class:"a-link",to:`/user/${e.sendUserId}`},{default:g(()=>[c("@"+l(e.sendNickName),1)]),_:2},1032,["to"]),c(" 对我的文章【"),i(p,{class:"a-link",to:`/post/${e.articleId}`},{default:g(()=>[c(l(e.articleTitle),1)]),_:2},1032,["to"]),c("】发表了评论 "),s("span",Y,l(e.createTime),1)]),s("div",{class:"reply-content",innerHTML:e.messageContent},null,8,Z)])])):d("",!0),e.messageType==2?(o(),n("div",ee,[i(C,{userId:e.sendUserId,width:50},null,8,["userId"]),s("div",se,[s("div",null,[i(p,{class:"a-link",to:`/user/${e.sendUserId}`},{default:g(()=>[c("@"+l(e.sendNickName),1)]),_:2},1032,["to"]),c(" 赞了我的文章【"),i(p,{class:"a-link",to:`/post/${e.articleId}`},{default:g(()=>[c(l(e.articleTitle),1)]),_:2},1032,["to"]),c("】 "),s("span",te,l(e.createTime),1)])])])):d("",!0)]))),256))]),!M.value&&v.value.list!=null&&v.value.list.length==0?(o(),n("div",ae,[i(N)])):d("",!0)])}}},ce=L(oe,[["__scopeId","data-v-19791d7b"]]);export{ce as default};
