import{_ as $,u as b,a as N,b as s,z as S,c as T,o as m,m as L,p as o,q as f,e as g,J as V,K as q,t as z}from"./index-CEFTijA-.js";import{c as A,l as E}from"./api-whLdgNP3.js";import{n as R}from"./newCards-D_wib9YV.js";const x={class:"menu"},D=["onClick"],F={class:"s-cards"},H={__name:"Search",setup(J){const _=b(),k=N(),t=s(0),d=a=>{t.value=a,a==0&&_.push("/search"),I()},h=s([]),C=s(0),B=async()=>{let a=await A();a&&(h.value=a.data)},u=s(!1),n=s([]),I=async()=>{u.value=!0;let a={pBoardId:C.value,orderType:t.value,showLoading:!1},e=await E(a);u.value=!1,e&&(n.value=e.data.list,w())},y=a=>{_.push(`/${a.boardId}`)};S(()=>k.params,(a,e)=>{C.value=a.pBoardId,I()},{immediate:!0,deep:!0}),B();const c=s([]),i=s([]),v=s([]),p=s([]);function w(){c.value=[],i.value=[],v.value=[],p.value=[];let a=parseInt(n.value.length/4);n.value.forEach((e,r)=>{if(a==0){c.value.push(e);return}if(r<a){c.value.push(e);return}if(r<2*a){i.value.push(e);return}if(r<3*a){v.value.push(e);return}p.value.push(e)})}return(a,e)=>{const r=T("el-divider");return m(),L("div",null,[o("div",x,[o("div",{class:f(["mItem",t.value==0?"active":""]),onClick:e[0]||(e[0]=l=>d(0))},"推荐",2),o("div",{class:f(["mItem",t.value==1?"active":""]),onClick:e[1]||(e[1]=l=>d(1))},"发布时间",2),o("div",{class:f(["mItem",t.value==2?"active":""]),onClick:e[2]||(e[2]=l=>d(2))},"最新",2),g(r,{direction:"vertical"}),(m(!0),L(V,null,q(h.value,l=>(m(),L("div",{class:"mItem",onClick:K=>y(l)},z(l.boardName),9,D))),256))]),o("div",F,[g(R,{cardList:n.value,cardList1:c.value,cardList2:i.value,cardList3:v.value,cardList4:p.value,loading:u.value},null,8,["cardList","cardList1","cardList2","cardList3","cardList4","loading"])])])}}},M=$(H,[["__scopeId","data-v-5d48a779"]]);export{M as default};
